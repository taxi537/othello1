<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>سیستم بررسی شیفت‌های تاکسی</title>
  <style>
    @import url("https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;700&display=swap");
    body {
      margin:0;
      font-family:"Vazirmatn",sans-serif;
      background:#0a0a0a;
      color:#fff;
      text-align:center;
    }

    /* پس‌زمینه توپ‌ها */
    #balls-bg {
      position: fixed;
      top:0; left:0; width:100%; height:100%;
      z-index:0;
      pointer-events: none;
    }
    .ball {
      position: absolute;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, #fff, #000);
      opacity:0.6;
      animation: float 10s linear infinite;
    }
    .ball:nth-child(1){width:60px;height:60px;top:10%;left:15%;animation-duration:6s;}
    .ball:nth-child(2){width:50px;height:50px;top:50%;left:65%;animation-duration:8s;}
    .ball:nth-child(3){width:40px;height:40px;top:30%;left:80%;animation-duration:9s;}
    .ball:nth-child(4){width:55px;height:55px;top:70%;left:30%;animation-duration:12s;}
    @keyframes float{
      0%{transform: translate3d(0,0,0) rotateX(0deg) rotateY(0deg);}
      50%{transform: translate3d(40px,-40px,20px) rotateX(180deg) rotateY(180deg);}
      100%{transform: translate3d(0,0,0) rotateX(360deg) rotateY(360deg);}
    }

    header, .section{
      position: relative;
      z-index:1;
    }

    header {
      padding:20px;
      font-weight:bold;
      background: rgba(0,0,0,0.6);
      box-shadow: 0 4px 20px rgba(0,0,0,0.7);
      border-bottom: 2px solid rgba(0,170,255,0.3);
      position: sticky;
      top:0;
    }
    .title {
      font-size:2.5rem;
      margin-bottom:10px;
      color:#00d4ff;
      text-shadow:0 0 15px #00d4ff,0 0 25px #0077ff;
    }
    .clock {
      font-size:3.5rem;
      font-weight:bold;
      color:#00f0ff;
      text-shadow:0 0 15px #00d4ff,0 0 30px #0055ff;
    }
    .section {
      background: rgba(0,0,0,0.35);
      margin:20px auto;
      padding:20px;
      border-radius:20px;
      width:90%;
      max-width:900px;
      backdrop-filter: blur(8px);
      box-shadow:0 8px 30px rgba(0,0,0,0.7);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .section:hover{
      transform: translateY(-5px);
      box-shadow: 0 12px 40px rgba(0,0,0,0.8);
    }
    h2{
      color:#00d4ff;
      text-shadow:0 0 10px #00aaff;
    }
    table {
      width:100%;
      border-collapse: collapse;
      margin-top:15px;
    }
    th,td {
      padding:12px;
      border-bottom:1px solid rgba(255,255,255,0.1);
      text-align:center;
    }
    table th {
      background: linear-gradient(135deg, rgba(0,212,255,0.3), rgba(0,0,0,0.2));
      color:#00f0ff;
    }
    tr:hover{ background: rgba(0,212,255,0.05);}
  </style>
</head>
<body>
  <!-- توپ‌ها -->
  <div id="balls-bg">
    <div class="ball"></div>
    <div class="ball"></div>
    <div class="ball"></div>
    <div class="ball"></div>
  </div>

  <!-- محتوای اصلی -->
  <header>
    <div class="title">سیستم بررسی شیفت‌های تاکسی</div>
    <div class="clock" id="clock"></div>
  </header>

  <div class="section" id="current-shifts">
    <h2>شیفت فعلی</h2>
    <div id="shift-list"></div>
  </div>

  <div class="section">
    <h2>جدول کامل شیفت‌ها</h2>
    <table id="full-schedule">
      <thead>
        <tr>
          <th>نام</th>
          <th>رنک</th>
          <th>روز / حالت</th>
          <th>ساعت</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <!-- اسکریپت -->
  <script>
  const shifts = [
    {name:"Danyall Abbasi",rank:"Taxi Director",times:[{days:"همه روزها",start:"20:00",end:"23:00"}]},
    {name:"Kourosh Zabeti",rank:"Taxi Deputy Director",times:[{days:"همه روزها",start:"14:00",end:"17:00"}]},
    {name:"Parham Azizi",rank:"Taxi Attendant",times:[{days:"همه روزها",start:"12:00",end:"12:01"}]},
{name:"Taha Azizi",rank:"Taxi Attendant",times:[{days:"همه روزها",start:"9:00",end:"12:00"}]},
    {name:"Abbas Abbasi",rank:"Taxi Attendant",times:[
        {days:"همه روزها",start:"12:00",end:"14:00"},
        {days:"همه روزها",start:"16:00",end:"17:00"}
    ]},
    {name:"Parsa Rahimi",rank:"Taxi Attendant",times:[{days:"همه روزها",start:"12:00",end:"15:00"}]}
  ];

  const rankOrder = {
    "Taxi Director": 1,
    "Taxi Deputy Director": 2,
    "Taxi Manager": 3,
    "Taxi Attendant": 4
  };

  function $(s){return document.querySelector(s);}
  function toPersianDigits(str){return String(str).replace(/\d/g,d=>"۰۱۲۳۴۵۶۷۸۹"[d]);}
  function timeToMins(t){const [h,m]=t.split(":").map(Number);return h*60+m;}
  function isEvenDay(date){
    const day = date.getDay();
    return [6,1,3,5].includes(day);
  }

  function updateClock(){
    const now=new Date();
    $("#clock").textContent=`${toPersianDigits(String(now.getHours()).padStart(2,"0"))}:${toPersianDigits(String(now.getMinutes()).padStart(2,"0"))}:${toPersianDigits(String(now.getSeconds()).padStart(2,"0"))}`;
  }

  function renderFullSchedule(){
    const tbody=$("#full-schedule tbody");
    tbody.innerHTML=shifts.slice().sort((a,b)=>(rankOrder[a.rank]||99)-(rankOrder[b.rank]||99))
    .map(p=>p.times.map(t=>`
      <tr>
        <td>${p.name}</td>
        <td>${p.rank}</td>
        <td>${t.days}</td>
        <td>${toPersianDigits(t.start)} تا ${toPersianDigits(t.end)}</td>
      </tr>`).join("")).join("");
  }

  function renderCurrentShifts(){
    const now=new Date();
    const curMins=now.getHours()*60+now.getMinutes();
    const even=isEvenDay(now);
    const active=[];
    shifts.forEach(p=>{
      p.times.forEach(t=>{
        let match=false;
        if(t.days==="همه روزها") match=true;
        if(t.days==="روز زوج"&&even) match=true;
        if(t.days==="روز فرد"&&!even) match=true;
        if(!match) return;
        const start=timeToMins(t.start),end=timeToMins(t.end);
        if(curMins>=start&&curMins<end){
          const remain=end-curMins;
          const rh=Math.floor(remain/60),rm=remain%60;
          active.push(`${p.name} (${p.rank}) - ${rh>0?toPersianDigits(rh)+" ساعت و ":""}${toPersianDigits(rm)} دقیقه مانده`);
        }
      });
    });
    $("#shift-list").innerHTML=active.length?active.map(x=>`<div>${x}</div>`).join(""):"<div>در حال حاضر کسی در شیفت نیست</div>";
  }

  updateClock(); renderFullSchedule(); renderCurrentShifts();
  setInterval(updateClock,1000);
  setInterval(renderCurrentShifts,1000);
  </script>
</body>
</html>


