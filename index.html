<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>سیستم بررسی شیفت‌های تاکسی</title>
  <style>
    @import url("https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;700&display=swap");

    body {
      margin:0;
      font-family:"Vazirmatn",sans-serif;
      color:#fff;
      text-align:center;
      background: linear-gradient(135deg, #FFD700, #000);
      position: relative;
      overflow-x:hidden;
    }

    /* الگوی نوار تاکسی */
    body::before {
      content:"";
      position: fixed;
      top:0; left:0; width:100%; height:100%;
      background-image: linear-gradient(45deg, rgba(0,0,0,0.25) 25%, transparent 25%, transparent 50%, rgba(0,0,0,0.25) 50%, rgba(0,0,0,0.25) 75%, transparent 75%, transparent);
      background-size: 50px 50px;
      z-index:0;
    }

    /* توپ‌های متحرک */
    #balls-bg {
      position: fixed;
      top:0; left:0; width:100%; height:100%;
      z-index:1;
      pointer-events: none;
    }
    .ball {
      position: absolute;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, #fff200, #ff9900);
      opacity:0.8;
      width:70px; height:70px;
      display:flex;
      align-items:center;
      justify-content:center;
      color:#000;
      font-weight:bold;
      font-size:1rem;
      text-shadow:0 0 5px #fff;
      animation: float 12s linear infinite;
    }
    .ball:nth-child(1){top:15%;left:20%;animation-duration:6s;}
    .ball:nth-child(2){top:40%;left:70%;animation-duration:8s;}
    .ball:nth-child(3){top:65%;left:35%;animation-duration:10s;}
    .ball:nth-child(4){top:25%;left:80%;animation-duration:12s;}

    @keyframes float {
      0%{transform: translate(0,0) rotate(0deg);}
      50%{transform: translate(40px,-40px) rotate(180deg);}
      100%{transform: translate(0,0) rotate(360deg);}
    }

    /* محتوا */
    header, .section{
      position: relative;
      z-index:2;
    }
    header {
      padding:20px;
      font-weight:bold;
      background: rgba(0,0,0,0.7);
      border-bottom: 3px solid #FFD700;
      box-shadow: 0 4px 20px rgba(0,0,0,0.8);
      position: sticky;
      top:0;
    }
    .title {
      font-size:2.5rem;
      margin-bottom:10px;
      color:#FFD700;
      text-shadow:0 0 15px #FFD700,0 0 25px #FFA500;
    }
    .clock {
      font-size:3rem;
      font-weight:bold;
      color:#fff200;
      text-shadow:0 0 15px #FFD700,0 0 30px #FFA500;
    }
    .section {
      background: rgba(0,0,0,0.7);
      margin:20px auto;
      padding:20px;
      border-radius:20px;
      width:90%;
      max-width:900px;
      backdrop-filter: blur(8px);
      border:2px solid #FFD700;
      box-shadow:0 0 25px rgba(255,215,0,0.6);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .section:hover{
      transform: translateY(-5px);
      box-shadow: 0 0 40px rgba(255,215,0,0.9);
    }
    h2{
      color:#FFD700;
      text-shadow:0 0 10px #FFA500;
    }
    table {
      width:100%;
      border-collapse: collapse;
      margin-top:15px;
      color:#fff;
    }
    th,td {
      padding:12px;
      border-bottom:1px solid rgba(255,255,255,0.2);
      text-align:center;
    }
    table th {
      background: linear-gradient(135deg, rgba(255,215,0,0.4), rgba(0,0,0,0.4));
      color:#fff200;
    }
    tr:hover{ background: rgba(255,215,0,0.1);}
  </style>
</head>
<body>
  <!-- توپ‌ها -->
  <div id="balls-bg">
    <div class="ball">TAXI</div>
    <div class="ball">TAXI</div>
    <div class="ball">TAXI</div>
    <div class="ball">TAXI</div>
  </div>

  <!-- محتوای اصلی -->
  <header>
    <div class="title">سیستم بررسی شیفت‌های تاکسی</div>
    <div class="clock" id="clock"></div>
  </header>

  <div class="section" id="current-shifts">
    <h2>شیفت فعلی</h2>
    <div id="shift-list"></div>
  </div>

  <div class="section">
    <h2>جدول کامل شیفت‌ها</h2>
    <table id="full-schedule">
      <thead>
        <tr>
          <th>نام</th>
          <th>رنک</th>
          <th>روز / حالت</th>
          <th>ساعت</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <script>
   const shifts = [
      {name:"Danyall Abbasi",rank:"Taxi Director",times:[{days:"همه روزها",start:"20:00",end:"23:00"}]},
      {name:"Kourosh Zabeti",rank:"Taxi Deputy Director",times:[{days:"همه روزها",start:"14:00",end:"17:00"}]},
      {name:"Parham Azizi",rank:"Taxi Attendant",times:[{days:"همه روزها",start:"12:00",end:"12:01"}]},
       {name:"Arya Khazeie",rank:"Taxi Attendant",times:[{days:"همه روزها",start:"20:30",end:"23:30"}]},
      {name:"Abbas Abbasi",rank:"Taxi Attendant",times:[
          {days:"همه روزها",start:"12:00",end:"14:00"},
          {days:"همه روزها",start:"16:00",end:"17:00"}
      ]},
      {name:"Parsa Rahimi",rank:"Taxi Attendant",times:[{days:"همه روزها",start:"12:00",end:"15:00"}]}
   ];

    function $(s){return document.querySelector(s);}
    function toPersianDigits(str){return String(str).replace(/\d/g,d=>"۰۱۲۳۴۵۶۷۸۹"[d]);}
    function timeToMins(t){const [h,m]=t.split(":").map(Number);return h*60+m;}
    function isEvenDay(date){
      const day = date.getDay();
      return [6,1,3,5].includes(day);
    }

    function updateClock(){
      const now=new Date();
      $("#clock").textContent=`${toPersianDigits(String(now.getHours()).padStart(2,"0"))}:${toPersianDigits(String(now.getMinutes()).padStart(2,"0"))}:${toPersianDigits(String(now.getSeconds()).padStart(2,"0"))}`;
    }

    const rankOrder = {"Taxi Director":1,"Taxi Deputy Director":2,"Taxi Attendant":3};

    function renderFullSchedule(){
      const tbody=$("#full-schedule tbody");
      tbody.innerHTML=shifts.slice().sort((a,b)=>(rankOrder[a.rank]||99)-(rankOrder[b.rank]||99))
      .map(p=>p.times.map(t=>`
        <tr>
          <td>${p.name}</td>
          <td>${p.rank}</td>
          <td>${t.days}</td>
          <td>${toPersianDigits(t.start)} تا ${toPersianDigits(t.end)}</td>
        </tr>`).join("")).join("");
    }

    function renderCurrentShifts(){
      const now=new Date();
      const curMins=now.getHours()*60+now.getMinutes();
      const even=isEvenDay(now);
      const active=[];
      shifts.forEach(p=>{
        p.times.forEach(t=>{
          let match=false;
          if(t.days==="همه روزها") match=true;
          if(t.days==="روز زوج"&&even) match=true;
          if(t.days==="روز فرد"&&!even) match=true;
          if(!match) return;
          const start=timeToMins(t.start),end=timeToMins(t.end);
          if(curMins>=start&&curMins<end){
            const remain=end-curMins;
            const rh=Math.floor(remain/60),rm=remain%60;
            active.push(`${p.name} (${p.rank}) - ${rh>0?toPersianDigits(rh)+" ساعت و ":""}${toPersianDigits(rm)} دقیقه مانده`);
          }
        });
      });
      $("#shift-list").innerHTML=active.length?active.map(x=>`<div>${x}</div>`).join(""):"<div>در حال حاضر کسی در شیفت نیست</div>";
    }

    updateClock(); renderFullSchedule(); renderCurrentShifts();
    setInterval(updateClock,1000);
    setInterval(renderCurrentShifts,1000);
  </script>
</body>
</html>

